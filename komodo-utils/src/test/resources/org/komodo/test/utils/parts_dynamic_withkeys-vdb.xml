<?xml version="1.0" encoding="UTF-8"?>
<vdb name="MyPartsVDB_Dynamic" version="1">

	<connection-type>BY_VERSION</connection-type>

	<model name="PartsViewModel" type="VIRTUAL">
		<metadata type="DDL">
			<![CDATA[CREATE VIEW PartsSummary (
	PART_ID string(50) NOT NULL OPTIONS (SEARCHABLE 'Searchable'),
	PART_NAME string(255) OPTIONS (SEARCHABLE 'Searchable'),
	PART_COLOR string(30) OPTIONS (SEARCHABLE 'Searchable'),
	PART_WEIGHT string(255) OPTIONS (SEARCHABLE 'Searchable'),
	SUPPLIER_ID string(10) NOT NULL OPTIONS (SEARCHABLE 'Searchable'),
	QUANTITY bigdecimal(3) OPTIONS (FIXED_LENGTH TRUE, SEARCHABLE 'All_Except_Like'),
	SHIPPER_ID bigdecimal(2) OPTIONS (FIXED_LENGTH TRUE, SEARCHABLE 'All_Except_Like')
) OPTIONS (UPDATABLE TRUE)
AS
SELECT PartsSS.PARTS.PART_ID, PartsSS.PARTS.PART_NAME, PartsSS.PARTS.PART_COLOR, PartsSS.PARTS.PART_WEIGHT, PartsSS.SUPPLIER_PARTS.SUPPLIER_ID, PartsSS.SUPPLIER_PARTS.QUANTITY, PartsSS.SUPPLIER_PARTS.SHIPPER_ID FROM PartsSS.PARTS, PartsSS.SUPPLIER_PARTS WHERE PartsSS.PARTS.PART_ID = PartsSS.SUPPLIER_PARTS.PART_ID;]]>
			
		</metadata>
	</model>
	<model name="PartsSS" type="PHYSICAL">
		<source name="PartsSS" translator-name="sqlserver" connection-jndi-name="PartsSS"></source>
		<metadata type="DDL">
			<![CDATA[CREATE FOREIGN TABLE PARTS (
	PART_ID string(50) NOT NULL OPTIONS (NAMEINSOURCE '"PART_ID"', SEARCHABLE 'Searchable', NATIVE_TYPE 'varchar'),
	PART_NAME string(255) OPTIONS (NAMEINSOURCE '"PART_NAME"', SEARCHABLE 'Searchable', NATIVE_TYPE 'varchar'),
	PART_COLOR string(30) OPTIONS (NAMEINSOURCE '"PART_COLOR"', SEARCHABLE 'Searchable', NATIVE_TYPE 'varchar'),
	PART_WEIGHT string(255) OPTIONS (NAMEINSOURCE '"PART_WEIGHT"', SEARCHABLE 'Searchable', NATIVE_TYPE 'varchar'),
    CONSTRAINT PK_PARTS PRIMARY KEY(PART_ID)
) OPTIONS (NAMEINSOURCE '"partssupplier"."dbo"."PARTS"', UPDATABLE TRUE);

CREATE FOREIGN TABLE SHIP_VIA (
	SHIPPER_ID bigdecimal(2) NOT NULL OPTIONS (NAMEINSOURCE '"SHIPPER_ID"', FIXED_LENGTH TRUE, SEARCHABLE 'All_Except_Like', NATIVE_TYPE 'numeric'),
	SHIPPER_NAME string(30) OPTIONS (NAMEINSOURCE '"SHIPPER_NAME"', SEARCHABLE 'Searchable', NATIVE_TYPE 'varchar'),
	CONSTRAINT PK_SHIP_VIA PRIMARY KEY(SHIPPER_ID)
) OPTIONS (NAMEINSOURCE '"partssupplier"."dbo"."SHIP_VIA"', UPDATABLE TRUE);

CREATE FOREIGN TABLE STATUS (
	STATUS_ID bigdecimal(2) NOT NULL OPTIONS (NAMEINSOURCE '"STATUS_ID"', FIXED_LENGTH TRUE, SEARCHABLE 'All_Except_Like', NATIVE_TYPE 'numeric'),
	STATUS_NAME string(30) OPTIONS (NAMEINSOURCE '"STATUS_NAME"', SEARCHABLE 'Searchable', NATIVE_TYPE 'varchar'),
	CONSTRAINT PK_STATUS PRIMARY KEY(STATUS_ID)
) OPTIONS (NAMEINSOURCE '"partssupplier"."dbo"."STATUS"', UPDATABLE TRUE);

CREATE FOREIGN TABLE SUPPLIER (
	SUPPLIER_ID string(10) NOT NULL OPTIONS (NAMEINSOURCE '"SUPPLIER_ID"', SEARCHABLE 'Searchable', NATIVE_TYPE 'varchar'),
	SUPPLIER_NAME string(30) OPTIONS (NAMEINSOURCE '"SUPPLIER_NAME"', SEARCHABLE 'Searchable', NATIVE_TYPE 'varchar'),
	SUPPLIER_STATUS bigdecimal(2) OPTIONS (NAMEINSOURCE '"SUPPLIER_STATUS"', FIXED_LENGTH TRUE, SEARCHABLE 'All_Except_Like', NATIVE_TYPE 'numeric'),
	SUPPLIER_CITY string(30) OPTIONS (NAMEINSOURCE '"SUPPLIER_CITY"', SEARCHABLE 'Searchable', NATIVE_TYPE 'varchar'),
	SUPPLIER_STATE string(2) OPTIONS (NAMEINSOURCE '"SUPPLIER_STATE"', SEARCHABLE 'Searchable', NATIVE_TYPE 'varchar'),
    CONSTRAINT PK_SUPPLIER PRIMARY KEY(SUPPLIER_ID)
) OPTIONS (NAMEINSOURCE '"partssupplier"."dbo"."SUPPLIER"', UPDATABLE TRUE);

CREATE FOREIGN TABLE SUPPLIER_PARTS (
	SUPPLIER_ID string(10) NOT NULL OPTIONS (NAMEINSOURCE '"SUPPLIER_ID"', SEARCHABLE 'Searchable', NATIVE_TYPE 'varchar'),
	PART_ID string(50) NOT NULL OPTIONS (NAMEINSOURCE '"PART_ID"', SEARCHABLE 'Searchable', NATIVE_TYPE 'varchar'),
	QUANTITY bigdecimal(3) OPTIONS ( NAMEINSOURCE '"QUANTITY"', FIXED_LENGTH TRUE, SEARCHABLE 'All_Except_Like', NATIVE_TYPE 'numeric'),
	SHIPPER_ID bigdecimal(2) OPTIONS (NAMEINSOURCE '"SHIPPER_ID"', FIXED_LENGTH TRUE, SEARCHABLE 'All_Except_Like', NATIVE_TYPE 'numeric'),
    CONSTRAINT PK_SUPPLIER_PARTS PRIMARY KEY(SUPPLIER_ID, PART_ID),
    CONSTRAINT FK_SPLIER_PRTS_PRTS FOREIGN KEY(PART_ID) REFERENCES PARTS (PART_ID),
    CONSTRAINT FK_SPLIER_PRTS_SPLY FOREIGN KEY(SUPPLIER_ID) REFERENCES SUPPLIER (SUPPLIER_ID)
) OPTIONS (NAMEINSOURCE '"partssupplier"."dbo"."SUPPLIER_PARTS"', UPDATABLE TRUE);]]>
			
		</metadata>
	</model>
</vdb>